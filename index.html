<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/style.css" />
    <title>Memory game</title>
  </head>
  <body>
    <script>
      const openCards = [];
      function createTable() {
        const body = document.getElementsByTagName("body")[0];
        const gameTable = document.createElement("div");
        gameTable.classList.add('gameTable');
        body.appendChild(gameTable);
        const size = {
          w: 4,
          h: 5,
        }
        
        for (let i = 0; i < size.w; i++) {
          let row = document.createElement("div");
          row.classList.add('row');
          gameTable.appendChild(row);

          for (let k = 0; k < size.h; k++){
            let card = document.createElement('div');
            card.classList.add('card');
            card.setAttribute('data-x', k);
            card.setAttribute('data-y', i);
            card.addEventListener('click', openCard);
            row.appendChild(card);
          }
        }        
      }
      createTable();

      function openCard (event) {
        const div = event.target;
        const coords = {
          x: div.dataset.x,
          y: div.dataset.y,
        }
        const divCoord = coords.x + ':' + coords.y;
        if(openCards.includes(divCoord)){
          const index = openCards.indexOf(divCoord);
          openCards.splice(index, 1);
          div.classList.remove('open');
        } else {
          openCards.push(divCoord);
          div.classList.add('open');
        }
        console.log(openCards)
      }
      
    </script>
  </body>
</html>
